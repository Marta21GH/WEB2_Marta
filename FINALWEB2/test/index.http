@token = Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4MjRkMGJjMjhhYjc1ZGFmNDYxMGM2OSIsImVtYWlsIjoidGVzdDRAZXhhbXBsZS5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc0NzI0MzE5NiwiZXhwIjoxNzQ3MjQ2Nzk2fQ.-rP5psWYY2-tR7WwnpuGo--nrx8P3kFZ6XW4tlUYjr8
### Registro de usuario
POST http://localhost:3000/api/auth/register
Content-Type: application/json

{
  "email": "test4@example.com",
  "password": "MiContraseña123"
}

### Validar email
POST http://localhost:3000/api/auth/validate
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4MjMxOGQzM2I0NTg5MmMwZjg1Mzk2NyIsImVtYWlsIjoidGVzdDRAZXhhbXBsZS5jb20iLCJyb2xlIjoidXNlciIsImlhdCI6MTc0NzEzMDU3OSwiZXhwIjoxNzQ3MTM0MTc5fQ.LtYHPovdLVtF64QrNLWw42FsBJ47C6JatvUUdclJSBc
Content-Type: application/json

{
  "code": "453672"
}

### Login de usuario
POST http://localhost:3000/api/auth/login
Content-Type: application/json

{
  "email": "test4@example.com",
  "password": "MiContraseña123"
}

### Onboarding - Datos personales
PUT http://localhost:3000/api/users/onboarding/personal
Authorization: {{ token }}
Content-Type: application/json

{
  "nombre": "Marta",
  "apellidos": "Prieto Rodríguez de Vera",
  "nif": "12345678A"
}

### Onboarding - Datos de compañía
PATCH http://localhost:3000/api/users/onboarding/company
Authorization: {{ token }}
Content-Type: application/json

{
  "nombreEmpresa": "InterWeb S.L.",
  "cif": "B12345678",
  "direccion": "Calle Ejemplo 123, Madrid",
  "telefono": "912345678"
}

### Obtener datos del usuario desde el token
GET http://localhost:3000/api/users/me
Authorization: {{ token }}

### Borrado lógico de usuario
DELETE http://localhost:3000/api/users/me
Authorization: {{ token }}

### Borrado físico de usuario
DELETE http://localhost:3000/api/users/me?soft=false
Authorization: {{ token }}

### FINAL ###

@clientId = 6824cf138928fcb4811ee99a

### Crear Cliente
POST http://localhost:3000/api/client
Authorization: {{ token }}
Content-Type: application/json

{
  "nombre": "Cliente Ejemplo",
  "email": "cliente@ejemplo.com",
  "telefono": "123456789",
  "direccion": "Calle Falsa 123"
}

### Actualizar Cliente
PUT http://localhost:3000/api/client/{{clientId}}
Authorization: {{ token }}
Content-Type: application/json

{
  "nombre": "Cliente Actualizado",
  "telefono": "987654321"
}

### Listar Todos los Clientes
GET http://localhost:3000/api/client
Authorization: {{ token }}

### Obtener Cliente por ID
GET http://localhost:3000/api/client/{{clientId}}
Authorization: {{ token }}

### Eliminar Cliente (Soft Delete)
DELETE http://localhost:3000/api/client/{{clientId}}
Authorization: {{ token }}

### Eliminar Cliente (Hard Delete)
DELETE http://localhost:3000/api/client/{{clientId}}?hard=true
Authorization: {{ token }}

### Listar Clientes Archivados
GET http://localhost:3000/api/client/archived
Authorization: {{ token }}

### Recuperar Cliente Archivado
PATCH http://localhost:3000/api/client/{{clientId}}/restore
Authorization: {{ token }}

@projectId = 6824cf1f8928fcb4811ee99e

### Crear Proyecto
POST http://localhost:3000/api/project
Authorization: {{ token }}
Content-Type: application/json

{
  "nombre": "Proyecto Ejemplo",
  "descripcion": "Este es un proyecto de ejemplo",
  "cliente": "{{ clientId }}"
}

### Actualizar Proyecto
PUT http://localhost:3000/api/project/{{projectId}}
Authorization: {{ token }}
Content-Type: application/json

{
  "nombre": "Proyecto Actualizado",
  "descripcion": "Descripción actualizada del proyecto"
}

### Listar Todos los Proyectos
GET http://localhost:3000/api/project
Authorization: {{ token }}

### Obtener Proyecto por ID
GET http://localhost:3000/api/project/{{projectId}}
Authorization: {{ token }}

### Eliminar Proyecto (Soft Delete)
DELETE http://localhost:3000/api/project/{{projectId}}
Authorization: {{ token }}

### Eliminar Proyecto (Hard Delete)
DELETE http://localhost:3000/api/project/{{projectId}}?hard=true
Authorization: {{ token }}

### Listar Proyectos Archivados
GET http://localhost:3000/api/project/archived
Authorization: {{ token }}

### Restaurar Proyecto Archivado
PATCH http://localhost:3000/api/project/{{projectId}}/restore
Authorization: {{ token }}

@deliveryNoteId = 6824cf2a8928fcb4811ee9a2

### Crear Albarán de Horas
POST http://localhost:3000/api/deliverynote
Authorization: {{ token }}
Content-Type: application/json

{
  "tipo": "horas",
  "descripcion": "Albarán de horas trabajadas",
  "horas": 8,
  "proyecto": "{{ projectId }}"
}

### Crear Albarán de Materiales
POST http://localhost:3000/api/deliverynote
Authorization: {{ token }}
Content-Type: application/json

{
  "tipo": "materiales",
  "descripcion": "Albarán de materiales utilizados",
  "materiales": [
    { "nombre": "Cemento", "cantidad": 5 },
    { "nombre": "Ladrillos", "cantidad": 100 }
  ],
  "proyecto": "{{ projectId }}"
}

### Actualizar Albarán
PUT http://localhost:3000/api/deliverynote/{{deliveryNoteId}}
Authorization: {{ token }}
Content-Type: application/json

{
  "descripcion": "Albarán actualizado",
  "horas": 10,
  "firmado": true
}

### Listar Todos los Albaranes
GET http://localhost:3000/api/deliverynote
Authorization: {{ token }}

### Obtener Albarán por ID
GET http://localhost:3000/api/deliverynote/{{deliveryNoteId}}
Authorization: {{ token }}

### Eliminar Albarán (Soft Delete)
DELETE http://localhost:3000/api/deliverynote/{{deliveryNoteId}}
Authorization: {{ token }}

### Verificar que el Albarán está Archivado
GET http://localhost:3000/api/deliverynote/archived
Authorization: {{ token }}

### Recuperar Albarán Archivado
PATCH http://localhost:3000/api/deliverynote/{{deliveryNoteId}}/restore
Authorization: {{ token }}

### Eliminar Albarán (Hard Delete)
DELETE http://localhost:3000/api/deliverynote/{{deliveryNoteId}}?hard=true
Authorization: {{ token }}

### Verificar que el Albarán ya no existe
GET http://localhost:3000/api/deliverynote/{{deliveryNoteId}}
Authorization: {{ token }}
